{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\DenisIevlev\\\\Desktop\\\\game-of-thrones\\\\react-gotapp\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\DenisIevlev\\\\Desktop\\\\game-of-thrones\\\\react-gotapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\DenisIevlev\\\\Desktop\\\\game-of-thrones\\\\react-gotapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\DenisIevlev\\\\Desktop\\\\game-of-thrones\\\\react-gotapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n\nvar gotService =\n/*#__PURE__*/\nfunction () {\n  function gotService() {\n    var _this = this;\n\n    _classCallCheck(this, gotService);\n\n    this.getResource =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(url) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(\"\".concat(_this._apiBase).concat(url));\n\n              case 2:\n                res = _context.sent;\n\n                if (res.ok) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new Error(\"Could not fetch \".concat(url) + \", received \".concat(res.status));\n\n              case 5:\n                _context.next = 7;\n                return res.json();\n\n              case 7:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this._apiBase = \"https://anapioficeandfire.com/api\";\n  }\n\n  _createClass(gotService, [{\n    key: \"getAllCharacters\",\n    value: function () {\n      var _getAllCharacters = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.getResource(\"/characters?page=5&pageSize=10\");\n\n              case 2:\n                res = _context2.sent;\n                return _context2.abrupt(\"return\", res.map(this._transformCharacter));\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getAllCharacters() {\n        return _getAllCharacters.apply(this, arguments);\n      }\n\n      return getAllCharacters;\n    }()\n  }, {\n    key: \"getCharacter\",\n    value: function () {\n      var _getCharacter = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(id) {\n        var character;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getResource(\"/characters/\".concat(id));\n\n              case 2:\n                character = _context3.sent;\n                return _context3.abrupt(\"return\", this._transformCharacter(character));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getCharacter(_x2) {\n        return _getCharacter.apply(this, arguments);\n      }\n\n      return getCharacter;\n    }()\n  }, {\n    key: \"getAllBooks\",\n    value: function getAllBooks() {\n      return this.getResource(\"/books/\");\n    }\n  }, {\n    key: \"getBook\",\n    value: function getBook(id) {\n      return this.getResource(\"/books/\".concat(id));\n    }\n  }, {\n    key: \"getAllHouses\",\n    value: function getAllHouses() {\n      return this.getResource(\"/houses/\");\n    }\n  }, {\n    key: \"getHouse\",\n    value: function getHouse(id) {\n      return this.getResource(\"/houses/\".concat(id));\n    }\n  }, {\n    key: \"_transformCharacter\",\n    value: function _transformCharacter(character) {\n      return {\n        name: character.name,\n        gender: character.gender,\n        born: character.born,\n        died: character.died,\n        culture: character.culture\n      };\n    }\n  }, {\n    key: \"_transformHouse\",\n    value: function _transformHouse(house) {\n      return {\n        name: house.name,\n        region: house.region,\n        words: house.words,\n        titles: house.titles,\n        overlord: house.overlord,\n        ancestralWeapons: house.ancestralWeapons\n      };\n    }\n  }, {\n    key: \"_transformBook\",\n    value: function _transformBook(book) {\n      return {\n        name: book.name,\n        numberOfPages: book.numberOfPages,\n        publisher: book.publisher,\n        released: book.released\n      };\n    }\n  }]);\n\n  return gotService;\n}();\n\nexport { gotService as default };","map":{"version":3,"sources":["C:\\Users\\DenisIevlev\\Desktop\\game-of-thrones\\react-gotapp\\src\\services\\gotService.js"],"names":["gotService","getResource","url","fetch","_apiBase","res","ok","Error","status","json","map","_transformCharacter","id","character","name","gender","born","died","culture","house","region","words","titles","overlord","ancestralWeapons","book","numberOfPages","publisher","released"],"mappings":";;;;;IAAqBA,U;;;AACjB,wBAAc;AAAA;;AAAA;;AAAA,SAGbC,WAHa;AAAA;AAAA;AAAA;AAAA;AAAA,+BAGC,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACOC,KAAK,WAAI,KAAI,CAACC,QAAT,SAAoBF,GAApB,EADZ;;AAAA;AACLG,gBAAAA,GADK;;AAAA,oBAGNA,GAAG,CAACC,EAHE;AAAA;AAAA;AAAA;;AAAA,sBAID,IAAIC,KAAJ,CAAU,0BAAmBL,GAAnB,yBACEG,GAAG,CAACG,MADN,CAAV,CAJC;;AAAA;AAAA;AAAA,uBAOEH,GAAG,CAACI,IAAJ,EAPF;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAHD;;AAAA;AAAA;AAAA;AAAA;;AACV,SAAKL,QAAL,GAAgB,mCAAhB;AACH;;;;;;;;;;;;;;uBAWqB,KAAKH,WAAL,kC;;;AAAZI,gBAAAA,G;kDACCA,GAAG,CAACK,GAAJ,CAAQ,KAAKC,mBAAb,C;;;;;;;;;;;;;;;;;;;;;iDAEQC,E;;;;;;;uBACS,KAAKX,WAAL,uBAAgCW,EAAhC,E;;;AAAlBC,gBAAAA,S;kDACC,KAAKF,mBAAL,CAAyBE,SAAzB,C;;;;;;;;;;;;;;;;;;kCAEG;AACV,aAAO,KAAKZ,WAAL,WAAP;AACH;;;4BACOW,E,EAAI;AACR,aAAO,KAAKX,WAAL,kBAA2BW,EAA3B,EAAP;AACH;;;mCACc;AACX,aAAO,KAAKX,WAAL,YAAP;AACH;;;6BACQW,E,EAAI;AACT,aAAO,KAAKX,WAAL,mBAA4BW,EAA5B,EAAP;AACH;;;wCACmBC,S,EAAU;AAC1B,aAAO;AACHC,QAAAA,IAAI,EAAED,SAAS,CAACC,IADb;AAEHC,QAAAA,MAAM,EAAEF,SAAS,CAACE,MAFf;AAGHC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAHb;AAIHC,QAAAA,IAAI,EAAEJ,SAAS,CAACI,IAJb;AAKHC,QAAAA,OAAO,EAAEL,SAAS,CAACK;AALhB,OAAP;AAOH;;;oCACeC,K,EAAM;AAClB,aAAO;AACPL,QAAAA,IAAI,EAAEK,KAAK,CAACL,IADL;AAEPM,QAAAA,MAAM,EAAED,KAAK,CAACC,MAFP;AAGPC,QAAAA,KAAK,EAAEF,KAAK,CAACE,KAHN;AAIPC,QAAAA,MAAM,EAAEH,KAAK,CAACG,MAJP;AAKPC,QAAAA,QAAQ,EAAEJ,KAAK,CAACI,QALT;AAMPC,QAAAA,gBAAgB,EAAEL,KAAK,CAACK;AANjB,OAAP;AAQH;;;mCACcC,I,EAAK;AAChB,aAAO;AACPX,QAAAA,IAAI,EAAEW,IAAI,CAACX,IADJ;AAEPY,QAAAA,aAAa,EAAED,IAAI,CAACC,aAFb;AAGPC,QAAAA,SAAS,EAAEF,IAAI,CAACE,SAHT;AAIPC,QAAAA,QAAQ,EAAEH,IAAI,CAACG;AAJR,OAAP;AAMH;;;;;;SA3DgB5B,U","sourcesContent":["export default class gotService {\r\n    constructor() {\r\n        this._apiBase = \"https://anapioficeandfire.com/api\";\r\n    }\r\n     getResource = async (url) => {\r\n        const res = await fetch(`${this._apiBase}${url}`);\r\n\r\n        if (!res.ok) {\r\n            throw new Error(`Could not fetch ${url}` +\r\n                `, received ${res.status}`)\r\n        }\r\n        return await res.json();\r\n    }\r\n   async getAllCharacters() {\r\n        const res = await this.getResource(`/characters?page=5&pageSize=10`);\r\n        return res.map(this._transformCharacter);\r\n    }\r\n    async getCharacter(id) {\r\n        const character = await this.getResource(`/characters/${id}`);\r\n        return this._transformCharacter(character);\r\n    }\r\n    getAllBooks() {\r\n        return this.getResource(`/books/`);\r\n    }\r\n    getBook(id) {\r\n        return this.getResource(`/books/${id}`)\r\n    }\r\n    getAllHouses() {\r\n        return this.getResource(`/houses/`);\r\n    }\r\n    getHouse(id) {\r\n        return this.getResource(`/houses/${id}`);\r\n    }\r\n    _transformCharacter(character){\r\n        return {\r\n            name: character.name,\r\n            gender: character.gender,\r\n            born: character.born,\r\n            died: character.died,\r\n            culture: character.culture\r\n        }\r\n    }\r\n    _transformHouse(house){\r\n        return {\r\n        name: house.name,\r\n        region: house.region,\r\n        words: house.words,\r\n        titles: house.titles,\r\n        overlord: house.overlord,\r\n        ancestralWeapons: house.ancestralWeapons\r\n        }\r\n    }\r\n    _transformBook(book){\r\n        return {\r\n        name: book.name,\r\n        numberOfPages: book.numberOfPages,\r\n        publisher: book.publisher,\r\n        released: book.released\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}