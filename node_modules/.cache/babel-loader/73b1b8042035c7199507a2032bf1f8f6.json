{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\DenisIevlev\\\\Desktop\\\\game-of-thrones\\\\react-gotapp\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\DenisIevlev\\\\Desktop\\\\game-of-thrones\\\\react-gotapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\DenisIevlev\\\\Desktop\\\\game-of-thrones\\\\react-gotapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\n\nvar gotService = function gotService() {\n  var _this = this;\n\n  _classCallCheck(this, gotService);\n\n  this.getResource =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(url) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(_this._apiBase).concat(url));\n\n            case 2:\n              res = _context.sent;\n\n              if (res.ok) {\n                _context.next = 5;\n                break;\n              }\n\n              throw new Error(\"Could not fetch \".concat(url) + \", received \".concat(res.status));\n\n            case 5:\n              _context.next = 7;\n              return res.json();\n\n            case 7:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  this.getAllCharacters =\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _this.getResource(\"/characters?page=5&pageSize=10\");\n\n          case 2:\n            res = _context2.sent;\n            return _context2.abrupt(\"return\", res.map(_this._transformCharacter));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  this.getCharacter =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(id) {\n      var character;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _this.getResource(\"/characters/\".concat(id));\n\n            case 2:\n              character = _context3.sent;\n              return _context3.abrupt(\"return\", _this._transformCharacter(character));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    return function (_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  this.getAllBooks =\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _this.getResource(\"/books/\");\n\n          case 2:\n            res = _context4.sent;\n            return _context4.abrupt(\"return\", res.map(_this._transformBook));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this);\n  }));\n\n  this.getBook =\n  /*#__PURE__*/\n  function () {\n    var _ref5 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5(id) {\n      var book;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _this.getResource(\"/books/\".concat(id));\n\n            case 2:\n              book = _context5.sent;\n              return _context5.abrupt(\"return\", _this._transformBook(book));\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, this);\n    }));\n\n    return function (_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  this.getAllHouses =\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return _this.getResource(\"/houses/\");\n\n          case 2:\n            res = _context6.sent;\n            return _context6.abrupt(\"return\", res.map(_this._transformHouse));\n\n          case 4:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, this);\n  }));\n\n  this.getHouse =\n  /*#__PURE__*/\n  function () {\n    var _ref7 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7(id) {\n      var house;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return _this.getResource(\"/houses/\".concat(id));\n\n            case 2:\n              house = _context7.sent;\n              return _context7.abrupt(\"return\", _this._transformHouse(house));\n\n            case 4:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, this);\n    }));\n\n    return function (_x4) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  this.isSetData = function (data) {\n    if (data) {\n      return data;\n    } else {\n      return 'no data';\n    }\n  };\n\n  this._extractId = function (item) {\n    var idRegExp = /\\/([0-9]*)$/;\n    return item.url.match(idRegExp)[1];\n  };\n\n  this._transformCharacter = function (character) {\n    return {\n      id: _this._extractId(character),\n      name: _this.isSetData(character.name),\n      gender: _this.isSetData(character.gender),\n      born: _this.isSetData(character.born),\n      died: _this.isSetData(character.died),\n      culture: _this.isSetData(character.culture)\n    };\n  };\n\n  this._transformHouse = function (house) {\n    return {\n      id: _this._extractId(house),\n      name: _this.isSetData(house.name),\n      region: _this.isSetData(house.region),\n      words: _this.isSetData(house.words),\n      titles: _this.isSetData(house.titles),\n      overlord: _this.isSetData(house.overlord),\n      ancestralWeapons: _this.isSetData(house.ancestralWeapons)\n    };\n  };\n\n  this._transformBook = function (book) {\n    return {\n      id: _this._extractId(book),\n      name: _this.isSetData(book.name),\n      numberOfPages: _this.isSetData(book.numberOfPages),\n      publisher: _this.isSetData(book.publisher),\n      released: _this.isSetData(book.released)\n    };\n  };\n\n  this._apiBase = \"https://anapioficeandfire.com/api\";\n};\n\nexport { gotService as default };","map":{"version":3,"sources":["C:\\Users\\DenisIevlev\\Desktop\\game-of-thrones\\react-gotapp\\src\\services\\gotService.js"],"names":["gotService","getResource","url","fetch","_apiBase","res","ok","Error","status","json","getAllCharacters","map","_transformCharacter","getCharacter","id","character","getAllBooks","_transformBook","getBook","book","getAllHouses","_transformHouse","getHouse","house","isSetData","data","_extractId","item","idRegExp","match","name","gender","born","died","culture","region","words","titles","overlord","ancestralWeapons","numberOfPages","publisher","released"],"mappings":"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","sourcesContent":["export default class gotService {\r\n    constructor() {\r\n        this._apiBase = \"https://anapioficeandfire.com/api\";\r\n    }\r\n    getResource = async (url) => {\r\n        const res = await fetch(`${this._apiBase}${url}`);\r\n\r\n        if (!res.ok) {\r\n            throw new Error(`Could not fetch ${url}` +\r\n                `, received ${res.status}`)\r\n        }\r\n        return await res.json();\r\n    }\r\n     getAllCharacters = async () => {\r\n        const res = await this.getResource(`/characters?page=5&pageSize=10`);\r\n        return res.map(this._transformCharacter);\r\n    }\r\n     getCharacter = async (id) => {\r\n        const character = await this.getResource(`/characters/${id}`);\r\n        return this._transformCharacter(character);\r\n    }\r\n     getAllBooks = async () => {\r\n        const res = await this.getResource(`/books/`);\r\n        return res.map(this._transformBook);\r\n    }\r\n     getBook = async (id) => {\r\n        const book = await this.getResource(`/books/${id}`);\r\n        return this._transformBook(book);\r\n    }\r\n     getAllHouses = async () => {\r\n        const res = await this.getResource(`/houses/`);\r\n        return res.map(this._transformHouse);\r\n    }\r\n     getHouse = async (id) => {\r\n        const house = await this.getResource(`/houses/${id}`);\r\n        return this._transformHouse(house);\r\n    }\r\n    isSetData = (data) => {\r\n        if (data) {\r\n            return data\r\n        } else {\r\n            return 'no data';\r\n        }\r\n    }\r\n    _extractId = (item) => {\r\n        const idRegExp = /\\/([0-9]*)$/;\r\n        return item.url.match(idRegExp)[1];\r\n    }\r\n    \r\n    _transformCharacter = (character) => {\r\n        return {\r\n            id: this._extractId(character),\r\n            name: this.isSetData(character.name),\r\n            gender: this.isSetData(character.gender),\r\n            born: this.isSetData(character.born),\r\n            died: this.isSetData(character.died),\r\n            culture: this.isSetData(character.culture)\r\n        }\r\n    }\r\n    _transformHouse = (house) => {\r\n        return {\r\n            id: this._extractId(house),\r\n            name: this.isSetData(house.name),\r\n            region: this.isSetData(house.region),\r\n            words: this.isSetData(house.words),\r\n            titles: this.isSetData(house.titles),\r\n            overlord: this.isSetData(house.overlord),\r\n            ancestralWeapons: this.isSetData(house.ancestralWeapons)\r\n        }\r\n    }\r\n    _transformBook = (book) => {\r\n        return {\r\n            id: this._extractId(book),\r\n            name: this.isSetData(book.name),\r\n            numberOfPages: this.isSetData(book.numberOfPages),\r\n            publisher: this.isSetData(book.publisher),\r\n            released: this.isSetData(book.released)\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}